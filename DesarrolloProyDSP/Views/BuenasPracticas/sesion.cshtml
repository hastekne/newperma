@using PagedList.Mvc
@model Tuple<DesarrolloProyDSP.Models.ModuloBP.BuenaPracticaViewModel, DesarrolloProyDSP.Models.ModuloBP.EjeViewModel, PagedList.IPagedList<BusinessModel.Models.ModuloBP.BPInformacion>>
@*@model DesarrolloProyDSP.Models.ModuloBP.BuenaPracticaViewModel*@
@{
    Layout = null;
    ViewBag.Title = "Sesion";
    HttpContext.Current.User.Identity.Name.Equals("");
}

<!DOCTYPE html>

<html>
<head>
    <title>Session</title>
    @*<meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="keywords" content="Hablar sobre la plataforma SEG" />
        <script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <!-- <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all">-->
        <link href="@Url.Content("~/css/bootstrap.css")" rel="stylesheet" type="text/css" media="all">
        <!-- Custom Theme files -->
        <!--<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />-->
        <link href="@Url.Content("~/css/style.css")" rel="stylesheet" type="text/css" media="all">
        <!--js-->
        <script src="@Url.Content("~/Scripts/jquery-2.1.1.min.js")"></script>
        <!--icons-css-->
        <link href="@Url.Content("~/css/font-awesome.css")" rel="stylesheet">
        <link href="@Url.Content("~/css/panel.css")" rel="stylesheet">
        <link href="@Url.Content("~/material-design-iconic-font/css/materialdesignicons.min.css")" rel="stylesheet">

        <!--Google Fonts-->


        <link href='//fonts.googleapis.com/css?family=Carrois+Gothic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Work+Sans:400,500,600' rel='stylesheet' type='text/css'>

        <!--button css-->
        <link href="@Url.Content("~/css/demo-page.css")" rel="stylesheet" media="all">
        <link href="@Url.Content("~/css/hover.css")" rel="stylesheet" media="all">

        <!--static chart-->
        <script src="@Url.Content("~/Scripts/Chart.min.js")"></script>
        <!--//charts-->
        <script src="@Url.Content("~/Scripts/sidebarmenu.js")"></script>
        <!-- geo chart -->
        <script src="//cdn.jsdelivr.net/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script>window.modernizr || document.write('<script src="lib/modernizr/modernizr-custom.js"><\/script>')</script>
        <!--<script src="lib/html5shiv/html5shiv.js"></script>-->
        <!--pop up strat here-->
        <script src="@Url.Content("~/Scripts/jquery.magnific-popup.js")" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('.popup-with-zoom-anim').magnificPopup({
                    type: 'inline',
                    fixedContentPos: false,
                    fixedBgPos: true,
                    overflowY: 'auto',
                    closeBtnInside: true,
                    preloader: false,
                    midClick: true,
                    removalDelay: 300,
                    mainClass: 'my-mfp-zoom-in'
                });

            });



        </script>
        <!--pop up end here-->
        <!--skycons-icons-->
        <script src="@Url.Content("~/Scripts/skycons.js")"></script>
        <!--//skycons-icons-->*@
    @Html.Partial("../ViewPartialPrincipales/_ScriptsLink")
</head>
<body>

    @using (Html.BeginForm("Sesion","BuenasPracticas", FormMethod.Post, new { id = "formS", name = "formS" }))
    {

    <div class="page-container">
        <div class="left-content">
            <div class="mother-grid-inner">
                <!--header start here-->
                @*<div class="header-main">

                    <div class="row header-content">

                        <div>

                            <a href="http://www.seg.guanajuato.gob.mx">
                                <img src="image/editable logo.png" width="130" alt="SEG" />

                            </a> 	 <div style="margin-top: -60px; color: #FFFFFF" align="center" class="chit-chat-heading" id="titulo">
                                <p>Permanencia Escolar en la Educación Media Superior</p><br>

                            </div>


                            <nav id="main-nav-wrap" class="main-nav-wrap">
                                <ul class="main-navigation">
                                    <li><a href="index.html" title="">Inicio</a></li>
                                    <li class="has-children">
                                        <a href="Administrador/category.html" title="">Recursos Educativos</a>
                                        <!--SUB MENU  <ul class="sub-menu">
                                       <li><a href="category.html">Wordpress</a></li>
                                       <li><a href="category.html">HTML</a></li>
                                       <li><a href="category.html">Photography</a></li>
                                       <li><a href="category.html">UI</a></li>
                                       <li><a href="category.html">Mockups</a></li>
                                       <li><a href="category.html">Branding</a></li>
                                    </ul>-->
                                    </li>
                                    <li class="current">
                                        <a href="@Url.Action("Practicas","BuenasPracticas")" title="">Buenas pr&aacute;cticas</a>
                                        <!--SUB MENU    <ul class="sub-menu">
                                       <li><a href="single-video.html">Video Post</a></li>
                                       <li><a href="single-audio.html">Audio Post</a></li>
                                       <li><a href="single-gallery.html">Gallery Post</a></li>
                                       <li><a href="single-standard.html">Standard Post</a></li>
                                    </ul>-->
                                    </li>
                                    <li><a href="Administrador/style-guide.html" title="">Becas y Apoyos</a></li>
                                    <li><a href="ActividadesA.html" title="">Actividades Acad&eacute;micas</a></li>
                                    <li><a href="Administrador/contact.html" title="">Contacto</a></li>
                                    <li class="hvr-icon-buzz-out" style="background:none; color: color: #FFFCFC; height: auto; margin-top: -13px; margin-bottom: -20px"><a href="@Url.Action("CerrarSesion","BuenasPracticas")">Cerrar sesión</a></li>
                                </ul>
                            </nav> <!-- end main-nav-wrap -->



                        </div>
                    </div>







                </div>*@

                @Html.Partial("../ViewPartialPrincipales/_Header")

            </div>
            <!--heder end here-->
            <!-- script-for sticky-nav -->
            <script>
                $(document).ready(function () {
                    var navoffeset = $(".header-main").offset().top;
                    $(window).scroll(function () {
                        var scrollpos = $(window).scrollTop();
                        if (scrollpos >= navoffeset) {
                            $(".header-main").addClass("fixed");
                        } else {
                            $(".header-main").removeClass("fixed");
                        }
                    });

                });
            </script>
            <!-- /script-for sticky-nav -->
            <!--inner block start here-->

            <div class="inner-block" style="margin-top: -20px">
                <!--market updates updates-->
















                <div class="chit-chat-layer1" style="margin-top: -50px">
                    <div class="clearfix"> </div>

                    <div align="right" style="margin-bottom: 20px">
                        <a href="@Url.Action("Plantilla", "VisualizacionPrevia")" class="hvr-icon-rotate">Descargar plantilla</a>
                        <br>
                    </div>
                    <div class="clearfix"> </div>
                    <div class="col-md-12 mailbox-content  tab-content tab-content-in" style="padding-right: 30px;  padding-top: 10px">

                        <div class="col-md-4 compose">
                            <div class="compose-block" style="width:400px; " align="right">

                                <div class="compose-bottom">
                                    <div style="padding-top: 8px; padding-left: 10px; text-align: left" class="chit-chat-heading"> Modifica o Publica tu Buena Práctica </div>

                                    <select name="bpModifica" id="bpModifica" class="search-box search1" style="width: 100%; z-index: auto">

                                        @foreach (var item in Model.Item1.listaBP)
                                        {
                                            <option id="@item.idBuenaPractica" name="@item.idBuenaPractica">@item.tituloBP</option>
                                        }
                                        @if (Model.Item1.listaBP.Count == 0)
                                        {
                                            <option>Sin BP pendientes.</option>
                                        }
                                    </select>



                                </div>
                                <br><br>


                                <a href="@Url.Action("DatosGenerales","BuenasPracticas")">Nueva Práctica</a>   &shy; &shy;    <a onclick="EditDocumentacion()">Continuar</a>
                            </div>





                        </div>

                        <div class="col-md-8 mailbox-content  tab-content tab-content-in" align="right">
                            <div>
                                <div class="header-left">


                                    <div class="mailbox-border">
                                        <div class="mail-toolbar clearfix">
                                            <div>
                                                <!--search-box-->
                                                <style>
                                                    .container-4 {
                                                        width: 800px;
                                                        text-align: left;
                                                    }

                                                    .search1 {
                                                        border-radius: 15px;
                                                    }
                                                </style>
                                                <div class="box compose-block" style="background-color:#FFFFFF">
                                                    <div class="container-4">

                                                        <input type="search" id="palabraClave" name="palabraClave" style="z-index: auto" class="search1 search-box" placeholder="Palabra clave Título BP..." maxlength="40" />
                                                        <a class="hvr-icon-rotate-search " style="align-content: center; width:120px" id="buscarXPC" name="buscarXPC">Buscar</a>

                                                        <select name="cbxEje" id="cbxEje" class="search-box search1" style="z-index: auto" onchange="SelectedIndexChanged()">

                                                            @*<option id="sinSelect" name="sinSelect">Todos los ejes</option>*@
                                                            @*@foreach (var item in Model.Item2.listaEjes)
                                                            {
                                                                <option id="@item.idEje" name="@item.idEje">@item.nombre</option>

                                                            }*@
                                                            @if ((string)Session["cbxEje"].ToString() == "Todos los ejes")
                                                            {
                                                                <option id="sinSelect" name="sinSelect" selected>Todos los ejes</option>
                                                            }
                                                            else
                                                            {
                                                                <option id="sinSelect" name="sinSelect">Todos los ejes</option>
                                                            }

                                                            @foreach (var item in Model.Item2.listaEjes)
                                                            {


                                                                if ((string)Session["cbxEje"].ToString() == item.nombre)
                                                                {
                                                                    <option id="@item.idEje" name="@item.idEje" selected>@item.nombre</option>
                                                                }
                                                                else
                                                                {
                                                                    <option id="@item.idEje" name="@item.idEje">@item.nombre</option>}

                                                            }
                                                        </select>

                                                    </div>
                                                </div>
                                                <!--//end-search-box-->


                                                <div class="clearfix"> </div>

                                            </div>
                                        </div>
                                    </div>




                                </div>

                                <div class="clearfix"> </div>
                                <div style="padding-top: 8px; padding-left: 10px; text-align: left" class="chit-chat-heading"> TUS BUENAS PRACTICAS </div>
                                @*<span class="text-muted m-r-sm">
                                    Mostrar @(Model.Item3.PageCount < Model.Item3.PageNumber ? 0 : Model.Item3.PageNumber)
                                    de @Model.Item3.PageCount
                                </span>

                                <div class="btn-group">
                                    @Html.PagedListPager(Model.Item3, page => Url.Action("Sesion", new { page }))
                                </div>
                                <div class="clearfix"> </div>*@
                            </div>


                            <!--inicia contenido correos-->
                            @*<table class="table tab-border" style="text-decoration-color: #000000" id="tabBP">

                                <tr>

                                    <th>Título de la practica</th>

                                    <th>Eje temático</th>
                                    <th>Tipo de archivo</th>
                                    <th>Estado</th>

                                </tr>
                                <tbody>
                                    @for (int i = 0; i < Model.Item3.Count; i++)
                                    {
                                        <tr class="unread checked">
                                            <td class="hidden-xs">@Model.Item3[i].titulo</td>
                                            <td>@Model.Item3[i].eje</td>
                                            @if (Model.Item3[i].estado.Equals("LISTO"))
                                            {
                                                <td><i class="fa fa-paperclip"></i></td>
                                            }
                                            else
                                            {
                                                <td>-</td>
                                            }
                                            <td>@Model.Item3[i].estado</td>
                                        </tr>

                                    }

                                </tbody>
                            </table>*@

                            <!--termina contenido correos-->
                            <!--DIV para poner el partial view -->
                            <div id="resultTable">
                                @Html.Partial("_FiltroInfoTabla", Model.Item3)
                            </div>
                            <!---->
                        </div>
                    </div>
                </div>



            </div>

            <div class="clearfix"> </div>
        </div>
        <!--main page chit chating end here-->

        <div class="clearfix"> </div>


        <div class="clearfix">
            <br />
        </div>


        <!--inner block end here-->
        <!--copy rights start here-->
        @*<div class="copyrights">

            <img src="image/gto.png" class="imgRedonda" style="display:inline" alt="GTO" width="100">

            <br><br>
            <p>SECRETAR&Iacute;A DE EDUCACI&Oacute;N DE GUANAJUATO</p>

            <p style="font-size: 12px">
                Pozuelos: Conjunto Administrativo Pozuelos S/N Guanajuato, Gto. (473) 735-1000
                Puentecillas: Carretera Guanajuato-Puentecillas km 9.5 Guanajuato, Gto. (473) 735-1200
                Profesiones: Carretera Guanajuato-Juventino Rosas km 6.5 Esq. Jazm&iacute;n, Col. Arroyo Verde (473) 10 20 200

                01 800 890 30 80
            </p>

            <a href="mailto:comunicacion_seg@seg.guanajuato.gob.mx?subject=Email%20Subject">comunicacion_seg@seg.guanajuato.gob.mx</a>





            <ul class="social-buttons" id="demo3">
                <li>
                    <a href="http://www.youtube.com/user/EducacionGuanajuato" class="brandico-youtube"><img src="http://hopedalebuilders.com/files/2018/01/youtube-icon-white.png" width="80%"></a>
                </li>
                <li>
                    <a href="https://www.facebook.com/pages/Secretar%C3%ADa-de-Educaci%C3%B3n-de-Guanajuato-SEG/340786939279382?ref=hl" class="brandico-facebook"><img src="https://amcboise.com/wp-content/uploads/2017/11/facebook.png" width="90%"></a>
                </li>
                <li>
                    <a href="https://twitter.com/ComunicacionSEG" class="brandico-twitter-bird"><img src="https://www.bh-bims.org/wp-content/uploads/2017/12/twitter-icon-white-e1513102680550.png" width="70%"></a>
                </li>


            </ul>

        </div>*@
        @Html.Partial("../ViewPartialPrincipales/_Footer")
        <!--COPY rights end here-->
    </div>




        <div class="clearfix"> </div>

        <!--slide bar menu end here-->
        <!--scrolling js-->
        <script src="Administrador/js/jquery.nicescroll.js"></script>
        <script src="Administrador/js/scripts.js"></script>
        <!--//scrolling js-->
        <script src="Administrador/js/bootstrap.js"></script>
        <!-- mother grid end here-->
    }
   

   
</body>
</html>

<script type="text/javascript">
    $('#buscarXPC').click(function () { TabFilter(); return false; });
    $('#cbxEje').change(function () { TabFilter(); return false; });

    function BuscarPC() {
       document.getElementById("formS").submit();

       
    }

    function TabFilter() {
        $.ajax({
        type: "POST",
        url: '@Url.Action("SesionP", "BuenasPracticas")', // don't hard code url's
            data: { palabraClave: $('#palabraClave').val(), selectEje: $('#cbxEje').val()},
        dataType: "html",
            success: function (response) // lowercase (not Success)
            {
                $('#resultTable').html(response);
                document.getElementById("palabraClave").select();
             },
            error: function (response) {
                alert("Error en el filtro de la tabla.");
            }
        });
    }

    function EditDocumentacion()
    {
       // window.location.assign("RegistroBP");
        var tit = document.getElementById("bpModifica").value;
                $.ajax({
                    url: "@Url.Action("ValorSession", "BuenasPracticas")",
                    method: "POST",
                    data: { tituloBP: tit},
                    datatype: "json",
                    success: function () 
                    {
                        window.location.assign("RegistroBP");
                        
                    },
                    error: function () {
                        alert("Error.");
                    }
        })
       
    }

    
    
</script>
